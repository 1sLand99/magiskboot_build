add_library(sendfile_impl STATIC
    src/sendfile_compat.c)

if (NOT ${CMAKE_SYSTEM_NAME} STREQUAL "Linux")
    target_link_libraries(libbase sendfile_impl)
    target_link_libraries(magiskboot sendfile_impl)
    target_include_directories(libbase PUBLIC include)
endif()
